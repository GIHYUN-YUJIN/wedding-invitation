<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mobile Wedding Invitation</title>
<link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{--maxw:480px}
  *{box-sizing:border-box}
  body{
    margin:0;font-family:"Pretendard",system-ui,-apple-system,Segoe UI,Roboto;
    background:#f5f5f5 url('https://www.transparenttextures.com/patterns/asfalt-dark.png');
    color:#222; -webkit-font-smoothing:antialiased;
  }
  .wrap{max-width:var(--maxw);margin:18px auto;padding-bottom:80px}
  .card{
    background:#fff;border-radius:14px;overflow:hidden;
    box-shadow:0 10px 30px rgba(11,11,11,0.06);
  }
  .hero img{display:block;width:100%;height:auto}
  .pad{padding:20px}
  .title{text-align:center;font-size:26px;font-weight:700;margin-top:6px}
  .sub{ text-align:center;color:#666;margin-top:6px;font-size:14px }

  /* section reveal */
  .section{padding:20px;opacity:0;transform:translateY(18px);transition:all .6s cubic-bezier(.2,.9,.2,1)}
  .section.visible{opacity:1;transform:none}

  /* info box */
  .info{background:#fff;padding:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);text-align:center}

  /* slider */
  .slider{position:relative;margin-top:14px;border-radius:12px;overflow:hidden}
  .slides{display:flex;transition:transform .45s cubic-bezier(.2,.9,.2,1);will-change:transform}
  .slides img{flex:0 0 100%;width:100%;height:280px;object-fit:cover}
  .btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.8);border:none;padding:8px;border-radius:999px;font-size:20px;line-height:1;cursor:pointer}
  .prev{left:10px} .next{right:10px}

  /* guestbook */
  .guest{background:#fafafa;padding:14px;border-radius:12px}
  .guest input,.guest textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #e6e6e6;margin-top:8px;font-size:14px}
  .guest button{width:100%;margin-top:10px;padding:12px;border-radius:10px;border:none;background:#111;color:#fff;font-weight:600}
  .messages{margin-top:12px}
  .msg{background:#fff;padding:12px;border-radius:10px;margin-bottom:10px;box-shadow:0 2px 6px rgba(0,0,0,.04);position:relative}
  .msg .meta{font-size:13px;color:#666;margin-bottom:6px}
  .msg .del-btn{position:absolute;right:10px;top:10px;border:none;background:#ff6b6b;color:#fff;padding:6px 8px;border-radius:8px;font-size:13px;cursor:pointer}

  footer{margin-top:14px;padding:18px;text-align:center;color:#777;font-size:13px}
  @media(min-width:520px){ body{background:#f5f5f5} .wrap{margin:30px auto} .slides img{height:360px} }
</style>
</head>
<body>

<div class="wrap">
  <div class="card">
    <!-- HERO -->
    <div class="hero">
      <img id="heroImg" src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200" alt="hero">
    </div>

    <!-- CONTENT -->
    <div class="pad">
      <div class="section" id="intro">
        <div class="title" id="names">ê¹€OO Â· ë°•OO</div>
        <div class="sub" id="datetime">2025ë…„ 5ì›” 24ì¼ í† ìš”ì¼ Â· ì˜¤í›„ 2ì‹œ</div>
        <div class="sub" id="place">ë§ˆë¦¬ì•„ì£¼ ì›¨ë”©í™€ 3ì¸µ</div>
      </div>

      <div class="section" id="greet">
        <h3 style="text-align:center;margin:0 0 8px 0">ì´ˆëŒ€í•©ë‹ˆë‹¤</h3>
        <div class="info">ì„œë¡œì˜ ì¸ì—°ì´ ì•„ë¦„ë‹¤ìš´ ê²°ì‹¤ì„ ë§ºëŠ” ë‚ , ê·€í•œ ê±¸ìŒ í•˜ì‹œì–´ ì¶•ë³µí•´ ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.</div>
      </div>

      <!-- SLIDER -->
      <div class="section" id="gallerySection">
        <h3 style="text-align:center;margin:0 0 8px 0">ìš°ë¦¬ì˜ ìˆœê°„ë“¤</h3>
        <div class="slider" id="slider">
          <button class="btn prev" id="prevBtn" aria-label="previous">â€¹</button>
          <button class="btn next" id="nextBtn" aria-label="next">â€º</button>
          <div class="slides" id="slides">
            <!-- images (5) -->
            <img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1200" alt="">
            <img src="https://images.unsplash.com/photo-1493246507139-91e8fad9978e?q=80&w=1200" alt="">
            <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200" alt="">
            <img src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=1200" alt="">
            <img src="https://images.unsplash.com/photo-1482192596544-9eb780fc7f66?q=80&w=1200" alt="">
          </div>
        </div>
      </div>

      <!-- INFO -->
      <div class="section" id="infoSection">
        <h3 style="text-align:center;margin:0 0 8px 0">ì˜ˆì‹ ì•ˆë‚´</h3>
        <div class="info">ğŸ“… <b>2025-05-24</b> Â· â° <b>14:00</b><br>ğŸ“ <b>ë§ˆë¦¬ì•„ì£¼ ì›¨ë”©í™€ 3ì¸µ</b></div>
      </div>

      <!-- GUESTBOOK -->
      <div class="section" id="guestSection">
        <h3 style="text-align:center;margin:0 0 8px 0">ë°©ëª…ë¡</h3>
        <div class="guest">
          <input id="gName" placeholder="ì´ë¦„ (ì˜ˆ: í™ê¸¸ë™)">
          <textarea id="gMsg" rows="3" placeholder="ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”"></textarea>
          <button id="addBtn">ë“±ë¡í•˜ê¸°</button>

          <div class="messages" id="messages"></div>
        </div>
      </div>

      <footer>Â© ëª¨ë°”ì¼ ì²­ì²©ì¥</footer>
    </div>
  </div>
</div>

<script>
/* ---------- reveal on scroll ---------- */
const revealObserver = new IntersectionObserver((entries)=>{
  entries.forEach(en=>{
    if(en.isIntersecting) en.target.classList.add('visible');
  });
},{threshold:0.18});
document.querySelectorAll('.section').forEach(s=>revealObserver.observe(s));

/* ---------- slider logic (wrap + touch + busy flag) ---------- */
const slidesEl = document.getElementById('slides');
const slideCount = slidesEl.children.length;
let idx = 0;
let isAnimating = false;

function updateSlides() {
  slidesEl.style.transform = `translateX(-${idx * 100}%)`;
}
document.getElementById('prevBtn').addEventListener('click', ()=> {
  if(isAnimating) return;
  isAnimating = true;
  idx = (idx - 1 + slideCount) % slideCount;
  updateSlides();
  setTimeout(()=> isAnimating=false, 480);
});
document.getElementById('nextBtn').addEventListener('click', ()=> {
  if(isAnimating) return;
  isAnimating = true;
  idx = (idx + 1) % slideCount;
  updateSlides();
  setTimeout(()=> isAnimating=false, 480);
});

/* touch swipe */
let startX = 0, deltaX = 0, touching = false;
slidesEl.addEventListener('touchstart', (e)=>{
  if(e.touches.length>1) return;
  startX = e.touches[0].clientX;
  touching = true;
  slidesEl.style.transition = 'none';
});
slidesEl.addEventListener('touchmove', (e)=>{
  if(!touching) return;
  deltaX = e.touches[0].clientX - startX;
  const percent = deltaX / slidesEl.clientWidth * 100;
  slidesEl.style.transform = `translateX(calc(-${idx * 100}% + ${percent}%))`;
});
slidesEl.addEventListener('touchend', (e)=>{
  touching = false;
  slidesEl.style.transition = 'transform .45s cubic-bezier(.2,.9,.2,1)';
  const threshold = slidesEl.clientWidth * 0.18;
  if(Math.abs(deltaX) > threshold){
    if(deltaX < 0) idx = (idx + 1) % slideCount;
    else idx = (idx - 1 + slideCount) % slideCount;
  }
  updateSlides();
  deltaX = 0;
});

/* allow mouse drag on desktop for convenience */
let mouseDown = false, mouseStartX=0;
slidesEl.addEventListener('mousedown', e=>{
  mouseDown = true; mouseStartX = e.clientX; slidesEl.style.transition='none';
});
document.addEventListener('mousemove', e=>{
  if(!mouseDown) return;
  const dx = e.clientX - mouseStartX;
  const percent = dx / slidesEl.clientWidth * 100;
  slidesEl.style.transform = `translateX(calc(-${idx * 100}% + ${percent}%))`;
});
document.addEventListener('mouseup', e=>{
  if(!mouseDown) return;
  mouseDown = false; slidesEl.style.transition = 'transform .45s cubic-bezier(.2,.9,.2,1)';
  const dx = e.clientX - mouseStartX;
  const threshold = slidesEl.clientWidth * 0.18;
  if(Math.abs(dx) > threshold){
    if(dx < 0) idx = (idx + 1) % slideCount;
    else idx = (idx - 1 + slideCount) % slideCount;
  }
  updateSlides();
});

/*
  êµ¬ì¡°:
    localStorage['guestbook'] = JSON.stringify([{id, name, text, created}...])
    localStorage['guest_own_ids'] = JSON.stringify([id, id, ...])  // ì´ ë¸Œë¼ìš°ì €ê°€ ì‘ì„±í•œ ë©”ì‹œì§€ idë“¤ - ì‚­ì œ ê¶Œí•œ íŒë‹¨ìš©
*/
const MSG_KEY = 'guestbook_v1';
const OWN_KEY = 'guestbook_own_ids_v1';
const messagesEl = document.getElementById('messages');
const addBtn = document.getElementById('addBtn');

function loadMessages(){
  const raw = localStorage.getItem(MSG_KEY);
  const arr = raw ? JSON.parse(raw) : [];
  // sort by created ascending
  arr.sort((a,b)=>a.created - b.created);
  const ownRaw = localStorage.getItem(OWN_KEY);
  const ownIds = ownRaw ? JSON.parse(ownRaw) : [];

  messagesEl.innerHTML = arr.map(m=>{
    const canDel = ownIds.includes(m.id);
    return `
      <div class="msg" data-id="${m.id}">
        <div class="meta"><strong>${escapeHtml(m.name)}</strong> Â· <span style="color:#999;font-size:12px">${new Date(m.created).toLocaleString()}</span></div>
        <div class="text">${escapeHtml(m.text)}</div>
        ${canDel ? `<button class="del-btn" data-id="${m.id}">ì‚­ì œ</button>` : ''}
      </div>
    `;
  }).join('');

  // attach delete handlers
  document.querySelectorAll('.del-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('data-id');
      if(!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ì–´ìš”? ì´ ë™ì‘ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) return;
      deleteMessage(id);
    });
  });
}

function saveMessages(arr){
  localStorage.setItem(MSG_KEY, JSON.stringify(arr));
  loadMessages();
}
function addMessage(){
  const name = document.getElementById('gName').value.trim();
  const text = document.getElementById('gMsg').value.trim();
  if(!name || !text){ alert('ì´ë¦„ê³¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  const id = Date.now().toString(36) + Math.random().toString(36).slice(2,7);
  const created = Date.now();
  const raw = localStorage.getItem(MSG_KEY);
  const arr = raw ? JSON.parse(raw) : [];
  arr.push({id,name,text,created});
  saveMessages(arr);
  // record ownership for delete
  const ownRaw = localStorage.getItem(OWN_KEY);
  const ownArr = ownRaw ? JSON.parse(ownRaw) : [];
  ownArr.push(id);
  localStorage.setItem(OWN_KEY, JSON.stringify(ownArr));

  // clear inputs
  document.getElementById('gName').value=''; document.getElementById('gMsg').value='';
  // scroll to bottom of messages
  setTimeout(()=> { const last = messagesEl.lastElementChild; if(last) last.scrollIntoView({behavior:'smooth', block:'center'}); }, 60);
}

function deleteMessage(id){
  const raw = localStorage.getItem(MSG_KEY);
  const arr = raw ? JSON.parse(raw) : [];
  const newArr = arr.filter(m=>m.id !== id);
  saveMessages(newArr);
  // also remove from own ids if present
  const ownRaw = localStorage.getItem(OWN_KEY);
  if(ownRaw){
    let ownArr = JSON.parse(ownRaw);
    ownArr = ownArr.filter(x=>x !== id);
    localStorage.setItem(OWN_KEY, JSON.stringify(ownArr));
  }
}

addBtn.addEventListener('click', addMessage);
loadMessages();

function escapeHtml(s){
  return String(s).replace(/[&<>"']/g, function(m){
    return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];
  });
}

window.addEventListener('load', ()=>{ updateSlides(); loadMessages(); });

*/ 
</script>
</body>
</html>
